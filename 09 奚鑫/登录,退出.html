<html>
<head>
  <title>登录,退出</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307474 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="461"/>
<h1>登录,退出</h1>

<div>
<span><div><font style="font-size: 24pt;"><span style="min-height: 15pt; font-size: 24pt; font-family: ����; font-weight: bold;"> 一 </span><span style="min-height: 15pt; font-size: 24pt; font-family: ����; font-weight: bold;">登录</span></font></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt;"> <span style="min-height: 15pt; font-size: 12pt;">           </span><span style="min-height: 15pt; font-size: 12pt; color: rgb(156, 0, 76); font-weight: bold;">登录页的需求应是:  用户点击登录应该还是会跳回登录前访问的页面, 如果用户在登录前没有访问其他页面直接跳转回首页</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt; color: rgb(50, 135, 18);">//在登录页的后台设置session保存用户信息</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(50, 135, 18);">//用户登录成功后, 可以将用户的相关信息保存在session中方便其他页面进行使用</span></div><div><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">$_SESSION</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">[</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">'user_info'</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">] =</span> <span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">array</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">(</span></div><div><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">'slug'</span> <span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">=&gt;</span> <span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">$result</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">[</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">0</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">][</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">'slug'</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">],</span></div><div><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">'avatar'</span> <span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">=&gt;</span> <span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">$result</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">[</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">0</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">][</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">'avatar'</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">]</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">);</span></div><div><br style="font-size: 12pt;"/></div><div><br style="font-size: 12pt;"/></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(50, 135, 18);">//这样在其他页面就可以直接获取session中的数据了</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(50, 135, 18);">//尝试从登陆后的首页从session中查询用户的信息</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">session_start</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">();</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">$user_info</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">=</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">$_SESSION</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">[</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'user_info'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">];</span></div><div><br style="font-size: 12pt;"/></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(50, 135, 18);">//此处省略了对用户名和密码的检测,如有需要查看阿里百秀最后一天的代码的即可</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">$</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">ajax</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">({</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    type:</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'POST'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    url:</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'/admin/api/_login.php'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    data :</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">$form</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">serialize</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(),</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    success</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">:</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">function</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">data</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">){</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    if</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">data</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">status</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">===</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'成功'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">){</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(255, 0, 0);">//如果用户在登录前访问了其他页面, 那么跳转过去, 如果没有跳回首页</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">        location</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">href</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">=</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">data</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">path</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">?</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">data</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">path</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">:</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'/admin/index.php'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">;</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    }</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">else</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">{</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    $errorBox</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">show</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">().</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">children</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'strong'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">).</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">text</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'网络超时'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">);</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">    }</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">  },</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    dataType:</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'json'</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">})</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">});</span></div><div><br style="font-size: 12pt;"/></div><div><br style="font-size: 12pt;"/></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(50, 135, 18);">//当用户名和密码输入框获取焦点时, 将错误提示框隐藏</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    $form</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">find</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'input'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">).</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">on</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'focus'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">function</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(){</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    $errorBox</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">hide</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">();</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">});</span></div><div><br style="font-family: Monaco; font-size: 12pt;"/></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(167, 69, 0);">//设置用户输入用户名更换头像效果</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">$email</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">on</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'blur'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">function</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(){</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">    $</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">ajax</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">({</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">        url :</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'/admin/api/_getAvatar.php'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">        data :</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">{</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">email :</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">$email</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">val</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">()},</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">        success</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">:</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">function</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">datas</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">){</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">             if</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">datas</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">status</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">===</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'成功'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">){</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">                $avatar</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">fadeOut</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">function</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(){</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">                $avatar</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">prop</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'src'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">datas</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">avatar</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">).</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">fadeIn</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">();</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">                });</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">             }</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">else</span> <span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">{</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">                 $errorBox</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">show</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">().</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">children</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'strong'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">).</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">text</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'不存在此用户'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">);</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">                 $avatar</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">fadeOut</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">function</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(){</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">                 $avatar</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">.</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">prop</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">(</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'src'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'/static/assets/img/default.png'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">).</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">fadeIn</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">();</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">                });</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">        }</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">    },</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">            dataType:</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">'json'</span><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">,</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">    })</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">})</span></div></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"><span style="min-height: 15pt;"><font style="font-size: 24pt;"><span style="font-family: ����; font-size: 24pt; font-weight: bold;">二 退出</span></font></span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; color: rgb(79, 0, 154); font-family: ����; font-weight: bold;"><br/></span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; font-family: ����; font-weight: bold;"><font style="color: rgb(28, 51, 135);">(1)为什么不将退出写在公用的头部中?</font></span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 12pt; font-family: ����;"><b style="color: rgb(65, 173, 28);">      </b>  因为引入头部的位置是在页面的上方的html结构中, 如果将退出操作写在了公用的头部中,会导致页面在读取html代码的过程中掺杂了script的代码, 也因为很多的js的文件都是 在页面底部引入的,如果在上方调用了某个功能,可能会出现报错</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 16px; font-family: ����; font-weight: bold;"><font style="color: rgb(227, 0, 0);"><span>    </span></font></span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 16px; font-family: ����; font-weight: bold;"><font style="color: rgb(227, 0, 0);">解决方案:</font></span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 16px; font-family: ����;"><span style="color: rgb(156, 0, 76); font-weight: bold;">    </span><b style="color: rgb(156, 0, 76);">  </b>  1 -将退出操作写在每个页面的最后,缺点:较为繁琐,不利于后期的维护</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-size: 16px; font-family: ����;">        2 -将退出操作单独写在一个js文件中, 再在每个页面中引入即可, 利于后期维护</span></div><div style="min-height: 15pt;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 12pt;"><font color="#328712">//在后台文件中清空session</font></span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">&lt;?php</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(45, 79, 201);">  </span> <span style="font-family: Monaco; font-size: 12pt;"><font color="#328712"> //开启session</font></span></div><div><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">    session_start</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">();</span></div><div><span style="font-family: Monaco; font-size: 12pt; color: rgb(250, 122, 0);">  </span> <span style="font-family: Monaco; font-size: 12pt;"><font color="#328712"> //清空session</font></span></div><div><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">   <b> session_destroy</b></span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;"><b>();</b></span></div><div><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">?</span><span style="font-size: 12pt; color: rgb(45, 79, 201); font-family: Monaco;">&gt;</span></div><div><br/></div><div><span style="font-size: 12pt; color: rgb(255, 0, 0); font-family: Monaco;">//script代码</span></div><div><br/></div><div><span style="color: rgb(255, 122, 116); font-family: Monaco; font-size: 12pt;">&lt;</span><span style="color: rgb(255, 122, 116); font-family: Monaco; font-size: 12pt;">script</span><span style="color: rgb(255, 122, 116); font-family: Monaco; font-size: 12pt;">&gt;</span></div><div><span style="color: rgb(45, 79, 201); font-family: Monaco; font-size: 12pt;">  </span> <font color="#000000"><span style="font-family: Monaco; font-size: 12pt;"> $logout</span> <span style="font-family: Monaco; font-size: 12pt;">=</span> <span style="font-family: Monaco; font-size: 12pt;">$</span><span style="font-family: Monaco; font-size: 12pt;">(</span><span style="font-family: Monaco; font-size: 12pt;">'#logout'</span><span style="font-family: Monaco; font-size: 12pt;">);</span></font></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 12pt;">    $logout</span><span style="font-family: Monaco; font-size: 12pt;">.</span><span style="font-family: Monaco; font-size: 12pt;">on</span><span style="font-family: Monaco; font-size: 12pt;">(</span><span style="font-family: Monaco; font-size: 12pt;">'click'</span><span style="font-family: Monaco; font-size: 12pt;">,</span><span style="font-family: Monaco; font-size: 12pt;">function</span><span style="font-family: Monaco; font-size: 12pt;">(){</span></font></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 12pt;">    <span>    </span>$</span><span style="font-family: Monaco; font-size: 12pt;">.</span><span style="font-family: Monaco; font-size: 12pt;">ajax</span><span style="font-family: Monaco; font-size: 12pt;">({</span></font></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 12pt;">        <span>    </span>url :</span> <span style="font-family: Monaco; font-size: 12pt;">'/admin/api/_logout.php'</span><span style="font-family: Monaco; font-size: 12pt;">,</span></font></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 12pt;">       <span>    </span> success</span> <span style="font-family: Monaco; font-size: 12pt;">:</span> <span style="font-family: Monaco; font-size: 12pt;">function</span><span style="font-family: Monaco; font-size: 12pt;">(</span><span style="font-family: Monaco; font-size: 12pt;">datas</span><span style="font-family: Monaco; font-size: 12pt;">){</span></font></div><div><font color="#000000"><span style="font-family: Monaco; font-size: 12pt;">               <span>    </span> location</span><span style="font-family: Monaco; font-size: 12pt;">.</span><span style="font-family: Monaco; font-size: 12pt;">href</span> <span style="font-family: Monaco; font-size: 12pt;">=</span> <span style="font-family: Monaco; font-size: 12pt;">'/admin/login.php'</span><span style="font-family: Monaco; font-size: 12pt;">;</span></font></div><div><span style="font-family: Monaco; font-size: 12pt;"><font color="#000000">           <span>    </span> }</font></span></div><div><span style="font-family: Monaco; font-size: 12pt;"><font color="#000000">        <span>    </span>});</font></span></div><div><span style="font-family: Monaco; font-size: 12pt;"><font color="#000000">    <span>    </span> });</font></span></div><div><span style="color: rgb(255, 122, 116); font-family: Monaco; font-size: 12pt;">&lt;</span><span style="color: rgb(255, 122, 116); font-family: Monaco; font-size: 12pt;">/</span><span style="color: rgb(255, 122, 116); font-family: Monaco; font-size: 12pt;">script</span><span style="color: rgb(255, 122, 116); font-family: Monaco; font-size: 12pt;">&gt;</span></div></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div><div style="min-height: 15pt;"></div></span>
</div></body></html> 