<html>
<head>
  <title>模块化操作  requirejs的使用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307474 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="475"/>
<h1>模块化操作  requirejs的使用</h1>

<div>
<span><div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 24pt; font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">模块化操作</span></span></div><div><span style="font-size: 18.6667px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(79, 0, 154); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">    js的模块化规范一共有三种: AMD, CMD, CommonJS</span></div><div><span style="font-size: 14pt; color: rgb(65, 173, 28); font-weight: bold;">   </span> <span style="font-size: 14pt;">-CommonJS - 适用于服务端模块化操作NodeJS</span></div><div><span style="font-size: 14pt;">    -CMD   - sea.js</span></div><div><span style="font-size: 14pt;">    -AMD(异步模块加载规范)   - require.js (require模块按需加载, 不需要就先不加载)</span></div><div><span style="font-size: 14pt;">                <span style="font-size: 14pt; color: rgb(123, 0, 61);">-规范指定的模块定义方式:</span></span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(123, 0, 61);">                    -require()      -define()</span></span></div><div>     </div><div><br/></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold; color: rgb(106, 0, 129);">requirejs的使用方式:</span></span></div><div><span style="font-size: 12pt;"> </span> <span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold; color: rgb(79, 0, 154);"> 1</span> <span style="font-size: 12pt; font-weight: bold;">-引入requirejs文件(</span><span style="font-size: 12pt; font-weight: bold; color: rgb(214, 214, 214);">在index.html页面</span><span style="font-size: 12pt; font-weight: bold;">)</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">&lt;script src=&quot;require.js&quot; data-main=&quot;js/main&quot;&gt;&lt;/script&gt;</font></div></div><div><span style="font-size: 12pt;">  <span style="font-size: 12pt; font-weight: bold;"> 2 -设置data-main属性, 用于指定主模块所在的路径(默认为.js后缀 只写文件名即可-</span><span style="font-size: 12pt; font-weight: bold; color: rgb(227, 0, 0);">推荐不写.js</span><span style="font-size: 12pt; font-weight: bold;">)</span></span></div><div><span style="font-size: 12pt;">        <span style="font-size: 12pt; color: rgb(167, 69, 0);">- 其他模块引入时, 默认为主模块(main.js)所在目录(将主模块和其他模块文件放置在同一目录下使用最为简便(理想情况下))</span></span></div><div><span style="font-size: 12pt;">  <span style="font-size: 12pt; font-weight: bold;"> 3 -在主模块中设置具体功能, 使用require函数, 并且指定模块的依赖关系</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 16px;"><b><font color="#A8A8A8">数组用于声明函数依赖关系,函数用于设置当前模块内容</font></b></span></div><div><br/></div><div><span style="font-size: 16px;"><b><font color="#E30000">---主模块main.js    (假设依赖于当前目录下的a.js,b.js)</font></b></span></div><div><font style="font-size: 12pt;">require([<font color="#797979">'a','b'</font>],function(<font color="#FF0000">a</font>){</font></div><div><font style="font-size: 12pt;">    console.log('这是main.js的主体功能,其中还需要使用a模块的功能,功能如下:' + <font color="#FF0000">a</font>)</font></div><div><font style="font-size: 12pt;">}</font></div><div><br/></div><div><br/></div><div><font color="#E30000" style="font-size: 12pt;"><b>---a.js   (假设a模块依赖于c模块)</b></font></div><div><span style="font-size: 16px;">define(['c'],function(<font color="#DE5700">c</font>){</span></div><div><span style="font-size: 16px;"><font color="#41AD1C">    //当前模块如果需要设置返回值,使用return方式</font></span></div><div><span style="font-size: 16px;"><font color="#41AD1C">   </font> <font style="color: rgb(0, 0, 0);">return '这是a模块的主体功能(内部还具有c的功能,功能如下:' + </font><font color="#DE5700">c</font> <font color="#000000">+ '<span style="font-size: 16px; font-family: Monaco;">)</span>';</font></span></div><div><span style="font-size: 16px;">})</span></div><div><br/></div><div><span style="font-size: 16px;"><font color="#E30000"><b>---c.js (假设c谁也不依赖,数组结构可以不写)</b></font></span></div><div><span style="font-size: 16px; font-family: Monaco; color: rgb(51, 51, 51);">define(function(){</span></div><div><span style="font-size: 16px; color: rgb(65, 173, 28); font-family: Monaco;">    //当前模块如果需要设置返回值,使用return方式</span></div><div><span style="font-size: 16px; color: rgb(65, 173, 28); font-family: Monaco;">   </span> <span style="font-size: 16px; color: rgb(0, 0, 0); font-family: Monaco;">return '这是c模块的主体功能' </span></div><div><span style="font-size: 16px; font-family: Monaco; color: rgb(51, 51, 51);">})</span></div></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">   4 -其他模块的定义时使用define函数</span></span></div><div><span style="font-weight: bold;"> </span></div><div><span style="font-size: 14pt; color: rgb(255, 0, 0); font-weight: bold;">requirejs的优点:</span></div><div><span style="font-size: 12pt;">   </span> <span style="font-size: 12pt;">-采用异步加载方式, 提交了程序的响应速度</span></div><div><span style="font-size: 12pt;">    -无需考虑模块的引入顺序,只需要考虑某个模块依赖于那些模块即可</span></div><div><br/></div><div><br/></div><hr/><div><span style="color: #f8f8f2;">由于项目中</span><span style="color: #f8f8f2;">,</span><span style="color: #f8f8f2;">不可能将所有使用的js文件全部放置到一个目录下</span><span style="color: #f8f8f2;">,</span><span style="color: #f8f8f2;">所以这里的书写会十分繁琐</span></div><div><font style="font-size: 12pt;">- 使用模块标识的方式,并且在require的配置中设置每个模块标识对应的路径</font></div><div><font style="font-size: 12pt;">     - baseUrl : 用于设置基本路径信息</font></div><div><font style="font-size: 12pt;">     - paths : 指定每个模块标识对应的路径</font></div><div><font style="font-size: 12pt;">     - shim : 用于定义不符合AMD规范的模块</font></div><div><font style="font-size: 12pt;">         - deps : 用于声明当前模块的依赖关系,需要为数组形式</font></div><div><font style="font-size: 12pt;">         - <span style="font-style: italic;">exports</span> : 用于声明当前模块输出的主体功能</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco;"><font color="#A8A8A8" style="font-size: 10pt;">// $list.twbsPagination is not a function报错原因,他不遵守AMD规范,就是打开不是define()形式的</font></span></div><div><font color="#FF4635" style="font-size: 10pt;"><b><span style="font-family: Monaco;">require</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">config</span><span style="font-family: Monaco;">({</span></b></font></div><div><span style="font-family: Monaco;"><font color="#328712" style="font-size: 10pt;"><span>    </span>// 用于设置基本路径信息</font></span></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;">   <b> </b><b>baseUrl :</b></span> <span style="font-family: Monaco;">'/static/assets/vendors/'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;"><br/></span></font></div><div><span style="font-family: Monaco;"><font color="#328712" style="font-size: 10pt;"><span>    </span>// 指定每个模块标识对应的路径</font></span></div><div><span style="font-family: Monaco;"><font color="#000000" style="font-size: 10pt;">   <b> </b><b>paths:</b>{</font></span></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;"><span>  <span>    </span>  </span>'jquery'</span><span style="font-family: Monaco;">:</span><span style="font-family: Monaco;">'jquery/jquery'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;"><span>   <span>    </span> </span>'template'</span> <span style="font-family: Monaco;">:</span> <span style="font-family: Monaco;">'art-template/template-web'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;"><span>  <span>    </span>  </span>'bootstrap'</span> <span style="font-family: Monaco;">:</span> <span style="font-family: Monaco;">'bootstrap/js/bootstrap'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;"><span>  <span>    </span>  </span>'twbsPagination'</span> <span style="font-family: Monaco;">:</span> <span style="font-family: Monaco;">'twbs-pagination/jquery.twbsPagination'</span></font></div><div><span style="font-family: Monaco;"><font color="#000000" style="font-size: 10pt;"><span>    </span>},</font></span></div><div><span style="font-family: Monaco;"><font color="#000000" style="font-size: 10pt;"><br/></font></span></div><div><span style="font-family: Monaco;"><font color="#328712" style="font-size: 10pt;"><span>    </span>// shim : 用于定义不符合AMD规范的模块</font></span></div><div><span style="font-family: Monaco;"><font color="#000000" style="font-size: 10pt;"><span>    </span><b>shim :</b> {</font></span></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;">        </span><span style="font-family: Monaco;">'twbsPagination'</span> <span style="font-family: Monaco;">: {</span></font></div><div><font style="font-size: 10pt;"><span style="color: rgb(0, 0, 0); font-family: Monaco;">            </span><span style="font-family: Monaco;"><font color="#328712">// 声明当前模块的依赖关系</font></span></font></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;"><span>    </span><span>   <span>    </span> </span>deps : [</span><span style="font-family: Monaco;">'jquery'</span><span style="font-family: Monaco;">],</span></font></div><div><span style="font-family: Monaco;"><font><span style="font-size: 10pt; color: rgb(0, 0, 0);">    </span><span style="font-size: 10pt; color: rgb(0, 0, 0);">    <span>    </span></span><font color="#328712"><span style="font-size: 10pt;">//</span><font style="font-size: 10pt;">输出<span style="font-family: Monaco; color: rgb(50, 135, 18);">主体功能</span></font></font></font></span></div><div><font color="#000000" style="font-size: 10pt;"><span style="font-family: Monaco;">            exports :</span> <span style="font-family: Monaco;">'$.fn.twbsPagination'</span></font></div><div><span style="font-family: Monaco;"><font color="#000000" style="font-size: 10pt;">        }</font></span></div><div><span style="font-family: Monaco;"><font color="#000000" style="font-size: 10pt;">    }</font></span></div><div><span style="font-family: Monaco;"><font color="#FF4635" style="font-size: 10pt;"><b>})</b></font></span></div><div><font color="#000000" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><font color="#000000" style="font-size: 10pt;"><b><span style="font-family: Monaco;">require</span><span style="font-family: Monaco;">([</span><span style="font-family: Monaco;">'jquery'</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">'template'</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">'twbsPagination'</span><span style="font-family: Monaco;">],</span><span style="font-style: italic; font-family: Monaco;">function</span><span style="font-family: Monaco;">(</span><span style="font-style: italic; font-family: Monaco;">$</span><span style="font-family: Monaco;">,</span> <span style="font-style: italic; font-family: Monaco;">template</span><span style="font-family: Monaco;">){</span></b></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-style: italic; font-family: Monaco;">var</span> <span style="font-family: Monaco;">str</span><span style="font-family: Monaco;">=</span><span style="font-family: Monaco;">template</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">'template_test'</span><span style="font-family: Monaco;">,{name:</span><span style="font-family: Monaco;">'jack'</span><span style="font-family: Monaco;">,datas:[</span><span style="font-family: Monaco;">'a'</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">'b'</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">'c'</span><span style="font-family: Monaco;">]});</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// console.log(str);</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//1利用模板引擎,对评论页面进行页面绘制操作</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// -请求数据</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-style: italic; font-family: Monaco;">var</span> <span style="font-family: Monaco;">$tbody</span><span style="font-family: Monaco;">=</span><span style="font-family: Monaco;">$</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">'#tbody'</span><span style="font-family: Monaco;">);</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-style: italic; font-family: Monaco;">var</span> <span style="font-family: Monaco;">$list</span><span style="font-family: Monaco;">=</span><span style="font-family: Monaco;">$</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">'#list'</span><span style="font-family: Monaco;">);</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// -请求数据</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">$</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">ajax</span><span style="font-family: Monaco;">({</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">url:</span><span style="font-family: Monaco;">'/admin/api/_comsget.php'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">success</span><span style="font-family: Monaco;">:</span><span style="font-style: italic; font-family: Monaco;">function</span><span style="font-family: Monaco;">(</span><span style="font-style: italic; font-family: Monaco;">datas</span><span style="font-family: Monaco;">){</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//------结构操作</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// console.log(datas);</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//调用模板方法,将数据传入到方法中</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-style: italic; font-family: Monaco;">var</span> <span style="font-family: Monaco;">str</span><span style="font-family: Monaco;">=</span><span style="font-family: Monaco;">template</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">'comments'</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">datas</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">result</span><span style="font-family: Monaco;">);</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// console.log(str);</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//将模板生成的结构设置给tbody标签显示</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">$tbody</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">html</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">str</span><span style="font-family: Monaco;">);</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//-----分页功能</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//2使用插件制作分页效果</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-style: italic; font-family: Monaco;">var</span> <span style="font-family: Monaco;">count</span><span style="font-family: Monaco;">=</span><span style="font-family: Monaco;">datas</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">count</span><span style="font-family: Monaco;">;</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-style: italic; font-family: Monaco;">var</span> <span style="font-family: Monaco;">totalCount</span><span style="font-family: Monaco;">=</span><span style="font-family: Monaco;">Math</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">ceil</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">count</span><span style="font-family: Monaco;">/</span><span style="font-family: Monaco;">20</span><span style="font-family: Monaco;">);</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">$list</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">twbsPagination</span><span style="font-family: Monaco;">({</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">first:</span><span style="font-family: Monaco;">'首页'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">last:</span><span style="font-family: Monaco;">'末页'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">next:</span><span style="font-family: Monaco;">'下一页'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">prev:</span><span style="font-family: Monaco;">'上一页'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">totalPages:</span><span style="font-family: Monaco;">totalCount</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">//总页数</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">visiblePages:</span><span style="font-family: Monaco;">5</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">//显示页数</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">onPageClick</span><span style="font-family: Monaco;">:</span><span style="font-style: italic; font-family: Monaco;">function</span><span style="font-family: Monaco;">(</span><span style="font-style: italic; font-family: Monaco;">event</span><span style="font-family: Monaco;">,</span><span style="font-style: italic; font-family: Monaco;">page</span><span style="font-family: Monaco;">){</span> <span style="font-family: Monaco;">//页号点击后的处理程序</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//形参中的第二个page为当前点击的按钮页号</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// console.log(page);</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// 每次点击某个页号按钮时,请求对应页的数据,并进行渲染操作</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">$</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">ajax</span><span style="font-family: Monaco;">({</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">url:</span><span style="font-family: Monaco;">'/admin/api/_comsget.php'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">data:{page:</span><span style="font-family: Monaco;">page</span><span style="font-family: Monaco;">},</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">success</span><span style="font-family: Monaco;">:</span><span style="font-style: italic; font-family: Monaco;">function</span><span style="font-family: Monaco;">(</span><span style="font-style: italic; font-family: Monaco;">datas</span><span style="font-family: Monaco;">){</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//生成结构</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">$tbody</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">html</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">template</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">'comments'</span><span style="font-family: Monaco;">,</span><span style="font-family: Monaco;">datas</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">result</span><span style="font-family: Monaco;">));</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">},</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">dataType:</span><span style="font-family: Monaco;">'json'</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">});</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">}</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">});</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">},</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">dataType:</span><span style="font-family: Monaco;">'json'</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">});</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//实际上设置完分页功能后,插件会自动调用第一页的点击效果,我们就不需要自己进行第一次的绘制操作了</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// 分页插件官网:<a href="http://josecebe.github.io/twbs-pagination/" style="color: rgb(214, 214, 214);">http://josecebe.github.io/twbs-pagination/</a></font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><br style="font-family: Monaco;"/></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">//退出</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-style: italic; font-family: Monaco;">var</span> <span style="font-family: Monaco;">$logout</span> <span style="font-family: Monaco;">=</span> <span style="font-family: Monaco;">$</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">'#logout'</span><span style="font-family: Monaco;">);</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">$logout</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">on</span><span style="font-family: Monaco;">(</span><span style="font-family: Monaco;">'click'</span><span style="font-family: Monaco;">,</span> <span style="font-style: italic; font-family: Monaco;">function</span> <span style="font-family: Monaco;">() {</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">$</span><span style="font-family: Monaco;">.</span><span style="font-family: Monaco;">ajax</span><span style="font-family: Monaco;">({</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">url :</span> <span style="font-family: Monaco;">'/admin/api/_logout.php'</span><span style="font-family: Monaco;">,</span></font></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">success</span> <span style="font-family: Monaco;">:</span> <span style="font-style: italic; font-family: Monaco;">function</span> <span style="font-family: Monaco;">(</span><span style="font-style: italic; font-family: Monaco;">datas</span><span style="font-family: Monaco;">) {</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">// 服务端直接清除了session,直接跳转到登陆页面即可</font></span></div><div><font color="#D6D6D6" style="font-size: 10pt;"><span style="font-family: Monaco;">location</span><span style="font-family: Monaco;">.href</span> <span style="font-family: Monaco;">=</span> <span style="font-family: Monaco;">'/admin/login.php'</span><span style="font-family: Monaco;">;</span></font></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">}</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">});</font></span></div><div><span style="font-family: Monaco;"><font color="#D6D6D6" style="font-size: 10pt;">});</font></span></div><div><span style="font-family: Monaco;"><font color="#000000" style="font-size: 10pt;"><b>})</b></font></span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></span>
</div></body></html> 